import requests
# Define URLs and payload
login_url = 'https://library-admin.ajsn.co.ke/'
api_endpoint = 'https://library-admin.ajsn.co.ke/api/v1/patrons?_per_page=2000'

# api_endpoint = 'https://nairobi.jameasaifiyah.edu:8052/api/v1/patrons/1992'

# api_endpoint = 'https://nairobi.jameasaifiyah.edu:8052/api/v1/patrons'

# update={'address': '', 'address2': '', 'altaddress_address': '', 'altaddress_address2': '', 'altaddress_city': '', 'altaddress_country': '', 'altaddress_email': 'ami_sons@yahoo.com', 'altaddress_notes': '', 'altaddress_phone': '+96555549786', 'altaddress_postal_code': '', 'altaddress_state': '', 'altaddress_street_number': '', 'altaddress_street_type': '', 'altcontact_address': '', 'altcontact_address2': '', 'altcontact_city': '', 'altcontact_country': '', 'altcontact_firstname': '', 'altcontact_phone': '', 'altcontact_postal_code': '', 'altcontact_state': '', 'altcontact_surname': '','autorenew_checkouts': True, 'cardnumber': '1426303383', 'category_id': 'CT', 'check_previous_checkout': '', 'city': '', 'country': 'Nairobi', 'date_enrolled': '2023-10-17', 'date_of_birth': '1998-02-09', 'date_renewed': None, 'email': '24385@jameasaifiyah.edu', 'expiry_date': '2030-01-01', 'fax': '', 'firstname': '', 'gender': 'M', 'incorrect_address': False, 'initials': '', 'lang': '', 'last_seen': None, 'library_id': 'AJSN', 'login_attempts': 0, 'middle_name': None, 'mobile': '+96566649786', 'opac_notes': '', 'other_name': '', 'overdrive_auth_token': '', 'patron_card_lost': False, 'patron_id': 662, 'phone': '', 'postal_code': '', 'privacy': 0, 'privacy_guarantor_checkouts': 0, 'privacy_guarantor_fines': False, 'pronouns': None, 'protected': False, 'relationship_type': None,  'secondary_email': 'ami_sons@yahoo.com', 'secondary_phone': '+919998378553', 'sms_number': '', 'sms_provider_id': None, 'staff_notes': '', 'state': '', 'statistics_1': '', 'statistics_2': '', 'street_number': '', 'street_type': '', 'surname': 'M Qasim Sh Hasanali Bhai Kaydawala', 'title': '', 'updated_on': '2023-10-17T13:20:39+03:00', 'userid': '30485755'}

# addition = {'address': '', 'address2': '', 'altaddress_address': '', 'altaddress_address2': '', 'altaddress_city': '', 'altaddress_country': '', 'altaddress_email': 'hptest@gmail.com', 'altaddress_notes': '', 'altaddress_phone': '+919919199191', 'altaddress_postal_code': '', 'altaddress_state': '', 'altaddress_street_number': '', 'altaddress_street_type': '', 'altcontact_address': '', 'altcontact_address2': '', 'altcontact_city': '', 'altcontact_country': '', 'altcontact_firstname': '', 'altcontact_phone': '', 'altcontact_postal_code': '', 'altcontact_state': '', 'altcontact_surname': '',  'autorenew_checkouts': True, 'cardnumber': '110101010101001001', 'category_id': 'CGA', 'check_previous_checkout': '', 'city': '', 'country': 'Nairobi', 'date_enrolled': '2023-10-17', 'date_of_birth': '1998-11-09', 'date_renewed': None, 'email': 'hptests@jameasaifiyah.edu', 'expiry_date': '2030-01-01', 'fax': '', 'firstname': '', 'gender': 'M', 'incorrect_address': False, 'initials': '', 'lang': '', 'last_seen': None, 'library_id': 'AJSN', 'login_attempts': 0, 'middle_name': None, 'mobile': '+254715480437', 'opac_notes': '', 'other_name': '', 'overdrive_auth_token': '', 'patron_card_lost': False, 'patron_id': 759999, 'phone': '', 'postal_code': '', 'privacy': 0, 'privacy_guarantor_checkouts': 0, 'privacy_guarantor_fines': False, 'pronouns': None, 'protected': False, 'relationship_type': None, 'secondary_email': 'hptesttest@gmail.com', 'secondary_phone': '+967777735252', 'sms_number': '', 'sms_provider_id': None, 'staff_notes': '', 'state': '', 'statistics_1': '', 'statistics_2': '', 'street_number': '', 'street_type': '', 'surname': 'Hatim P TEst', 'title': '', 'updated_on': '2023-10-17T13:21:03+03:00', 'userid': '777777777'}

session = requests.Session()
session.cookies.set('CGISESSID', '795d59aa9bc7e6ca1d3b1a49ba939600')
# response = session.put(api_endpoint,json=update)
# response = session.post(api_endpoint,json=addition)
response = session.get(api_endpoint)

print("Authenticated request status code:", response.status_code)
print("Authenticated request text:", response.text)

kohadata=response.json()

print(kohadata)
print(len(kohadata))

# talabats=['30382919', '30440295', '30610592', '30911164', '30914820', '30917379', '30927479', '40801400', '40901952', '40902303', '40904924', '40905060', '40908613', '40908627', '40908701', '40909261', '40909937', '40910048', '40919673', '50422436', '50426212', '50427097', '50488890', '78652508', '50472182', '60481740', '40911193', '40912581', '50411166', '40910791', '40909251', '40908629', '40908614', '40907432', '40907810', '40905068', '40906182', '40906185', '40801210', '30925828', '30925939', '30922352', '30914680', '30916252', '30916321', '30442173', '30467883', '30141632', '30116181', '30477266', '30482305', '30462162', '30923035', '30923057', '30925209', '30925199', '30610586', '40700396', '40902209', '40901752', '40901259', '40901372', '40905870', '40906862', '40906288', '40908734', '40909282', '50140918', '50191541', '40911460', '40918000', '40911179', '40907592', '40905452', '40901774', '40903493', '40904378', '40904630', '40801207', '50496622', '30503821', '30804307', '30904557', '30905992', '30922605', '30921619', '30928251', '30906099', '30906333', '30906334', '30462181', '30462127', '30462133', '30462047', '30462480', '30153602', '30355995', '30358359', '30141161', '30462194', '30462386', '30915602', '30913041', '30928894', '30920047', '30917969', '30904436', '50443575', '60481972', '40467987', '40902205', '40905842', '40905047', '40906879', '40908645', '40915464', '50170888', '50426214', '40907461', '40909179', '40905894', '40905076', '40902539', '40901502', '40904626', '40901384', '40801203', '60482621', '60481678', '50471080', '50496634', '30903881', '30905945', '30920492', '30919913', '30922541', '30916845', '30440232', '30469708', '30355967', '30355990', '30150207', '30437250', '30913507', '30907552', '30921133', '30918976', '30903671', '30903246', '30610594', '60400088', '50439242', '40801205', '40904618', '40903827', '40905235', '40905736', '40906201', '40906222', '40908535', '40914425', '40911530', '40911454', '40907424', '40906942', '40902225', '40902206', '40902207', '40900467', '40477572', '40477584', '50443506', '50488995', '50492666', '30923056', '40150959', '30437174', '30432848', '30462389', '30141049', '30355975', '30462029', '30462057', '30477953', '30927878', '30924430', '30503653', '50496637', '60481640', '60482100', '40700402', '40900853', '40902160', '40901505', 
#           '40902934', '40906053', '40905739', '40905745', '40911427', '50426952', '50427092', '50162505', '40901379', '40901409', '40800832', '60481154', '60446105', '50496688', '78652457', '30903931', '30904422', '30928396', '30907829', '30477286', '30462070', '30462056', '30417862', '30355977', '30355971', '30335857', '30140551', '30358846', '30328772', '30355974', '30927438', '30925208', '30917752', '30900817', '50486872', '40801213', '40477822', '40900572', '40900780', '40902179', '40901396', '50421412', '40919575', '50416939', '40905758', '40905859', '40907161', '40906861', '40909518', '50422230', '40900405', '40470658', '40801102', '40801404', '50443588', '60484383', '78652461', '30805217', '30711430', '30711755', '30919111', '30921662', '30919728', '30928647', '30927244', '30908792', '30915645', '30417860', '30477152', '30355933', '30355999', '30909005', '40433178', '30502352', '30805055', '30805425', '30904435', '30905815', '60481188', '60446103', '60481077', '50467295', '50492003', '40800824', '40491835', '40800450', '40900338', '40900852', '50417380', '40909158', '50439197', '40900911', '40900342', '40902230', '40904614', '40700767', '40800482', '50496629', '60481024', '60478644', '60482171', '30904637', '30805507', '30800872', '30801321', '30801323', '30927122', '30919384', '30913260', '30483002', '30417814', '30417795', '30417857', '30910059', '30919496', '30712657', '30712204', '30702926', '30703594', '30805578', '60482033', '60484366', '60481167', '60415346', '50496626', '40800464', '40902945', '40902695', '40901430', '40908133', '40901243', '40900939', '40800444', '50451360', '60413119', 
#           '60413121', '60481141', '60482995', '60482067', '30803923', '30905905', '30702024', '40420527', '30910028', '30417798', '30440149', '30481424', '30358051', '30355942', '30355926', '30475964', '30611408', '30706691', '30905935', '30803979', '30805460', '30901325', '60482974', '60484365', '60481165', '60474982', '40800481', '40801388', '40477801', '40901023', '40900865', '40900851', '40477512', '40800468', '60474964', '60474966', '60414726', '60426932', '50456563', '50457475', '30805119', '30803676', '30801890', '30705059', '30700754', '30611065', '30611071', '30601288', '30602678', '30910512', '30908881', '30906005', '30914110', '30915761', '40450356', '30482101', '30417775', '30355938', '30329513', '30150504', '30386240', '30358959', '30355897', '30417832', '30437162', '30477334', '30914000', '30911805', '30501010', '30706110', '30711714', '30709938', '30712210', '30801739', '30803089', '30805301', '30900018', '50488821', '60415394', '60414754', '60400026', '60454328', '60479765', '60475000', '60482016', '40800496', '40800007', '40905495', '50430891', '50426209', '50140919', '50416009', '40800633', '60454312', '60474904', '60446832', '78652474', '30904973', '30711718', '30707266', '30504473', '30704666', '30909039', '30908393', '30910760', '30479428', '30487691', '30437278', '30417834', '30417779', '30462447', '30454040', '30461530', '30355907', '30358345', '30356610', '30384164', '30368632', '30368634', '30412621', '30416087', '30417722', '30417723', '30412934', '30399214', '30385650', '30394812', '30355908', '30355970', '30316305', '30316378', '30459019', '30454587', '30462072', '30417805', '30487475', '30495736', '30497296', '30910406', '30909272', '30915674', '30915506', '30602940', '30709675', '30900414', '30902316', '30803724', '60414716', '60426409', '50451215', '40800466', '40800704', '40901256', '50412000', '40912071', '50427080', '40910109', '60412935', '60481301', '78652510', '30900827', '30914113', '30908449', '30909896', '40420382', '30919696', '30921864', '30440255', '30141517', '30152125', '30152766', '30152829', '30141633', '30391605', '30150246', '30154126', '30355976', '30355981', '30477270', '30926427', '30909958', '30911165', '30916733', '30905363', '30904461', '50496648', '40910337', '40910861', '40905850', '40907405', '40906195', '40912080', '50412714', '40901495', 
#           '40800702', '40700688', '40700721', '40902739', '40903867', '50411330', '50411941', '40916743', '50422255', '40906688', '40910017', '40909275', '40909544', '40909285', '30904723', '30916895', '30912664', '30911576', '30906063', '40417786', '30478021', '30462082', '30442161', '30150416', '30304526', '30304805', '30304808', '30343892', '30416216', '30417172', '30379119', '30359115', '30461051', '30432995', '30480025', '30494835', '30488870', '30471572', '40420217', '40437844', '30928618', '30906022', '30905814', '30701315', '50424096', '50424107', '50417542', '50140859', '40475154', '60417690', '50455427', '50472774', '50473192', '50493238', '60460851', '60461166', '78652206', '50455121', '50455308', '50499509', '40475798', '40496232', '30498686', '40434632', '30471448', '30491210', '30495513', '30497229', '30434923', '30421520', '30461573', '30460044', '30455955', '30452560', '30366830', '30375899', '30387411', '30387484', '30355597', '30355757', '30355766', '30355896', '30320007', '30305604', '30141334', '20351184', '30355972', '30490154', '30464635', '30926111', '30914127', '30611959', '30904970', '40700652', '40801363', '40901734', '40902071', '40900488', '40900860', '50416999', '40905874', '60474995', '78652502', '50439250', '40905836', '40907417', '50181364', '40900918', '40900444', '40900994', '40901920', '40801052', '40800347', '30905932', '30900002', '30916255', '30908645', '30462771', '30355944', '30141043', '30382739', '30151135', '30355993', '30481257', '30440242', '30909890', '30912545', '40456895', '30925384', '30925642', '30923859', '30904503', '40800467', '40801147', '40903202', '40901251', 
#           '40900552', '40908810', '40907411', '40904928', '40908149', '50416951', '50416986', '40901035', '40901416', '40901394', '40902946', '40901707', '60481968', '30804724', '30905952', '30905923', '30801930', '30602849', '30909554', '30906752', '30437200', '30452777', '30481341', '30477976', '30469893', '30355927', '30150505', '30471872', '30477962', '30462058', '30417826', '30916894', '30921109', '30610582', '30801741', '30905732', '60481488', '60474988', '60415361', '40902654', '40903851', '40900921', '40800649', '40800631', '40492192', '40491813', '40477802', '50422241', '50422221', '50410921', '40908135', '40907037', '40477803', '40800454', '40800607', '40900920', '60415345', '50472445', '60481129', '30802011', '30901292', '30902954', '30924179', '30925679', '30927187', '30914130', '30914111', '30462126', '30141162', '30140207', '30355964', '30154128', '30153942', '30358837', '30482794', '30482103', '30498145', '30914124', '30913198', '30904720', '30707398', '30710980', '30602888', '60479766', '60481168', '60482097', '50457994', '78652471', '40901255', '40900194', '40905069', '40900327', '40900331', '40800488', '40800015', '40468866', '40461859', '40902888', '78652462', '50496677', '60481994', '30501363', '30800921', '30903579', '30903966', '30915286', '30925644', '30919385', '30372967', '30358032', '20351513', '30141977', '30466411', '40450341', '30908745', '30904486', '30709670', '60484390', '60481155', '50496631', '60414747', '60426996', '60415388', '40903617', '40902176', '40477838', '40801368', '40468865', '60426999', '60414712', '50475736', '60474997', '60474917', '60426901', '30706844', '30501271', '30701270', '30904225', '30905824', '30903301', '30802500', '30908039', '30914539', '30915977', '30916320', '30912977', '30914109', '30922956', '30462483', '30495364', '30482121', '30440097', '30355950', '30367355', '30390560', '30394484', '30388499', '30407627', '30360727', '30358329', '30355951', '30355930', '30355925', '30417849', '30417776', '30466412', '30477957', '30477285', '30919596', '30917812', '30803924', '30905943', '30706700', '30710094', '30710371', '60451103', '60451518', '60481925', '50444318', '60426452', '60414792', '40801204', '40901378', '40900932', '50417383', '50417385', '50421892', '50426296', '50436918', '40468829', '60481355', '60446673', '60478636', '30711330',
#             '30800490', '30701529', '30700642', '30704144', '30601994', '30804723', '30903555', '40458791', '30909527', '30477380', '30482110', '30495357', '30489178', '30432990', '30462071', '30355906', '30417687', '30394475', '30462096', '30440299', '30440128', '30482377', '30477313', '30911228', '30909522', '30802678', '30803171', '30905984', '30904427', '30704052', '30700065', '30712208', '30712160', '30801719', '60480996', '60432614', '60433406', '60481441', '60414791', '60414704', '50457817', '50457174', '50493904', '50436252', '50421862', '50416717', '40700948', '50446053', '60420601', '60428100', '60481026', '60481057', '30711535', '30903958', '30906002', '30802189', '30804001', '40402264', '30471315', '30484479', '30440066', '30432930', '30419178', '30398393', '30385697', '30417701', '30415463', '30360785', '30368486', '30384900', '30385564', '30355742', '30355983', '30355904', '30384147', '30368566', '30371478', '30357253', '30386366', '30387416', '30394992', '30450305', '30452917', '30462001', '30477952', '30462507', '30467710', '40444820', '30906301', '30909925', '30914514', '30803057', '30602677', '60478642', '60474996', '60436288', '78652232', '60426498', '40472541', '40477547', '50423159', '50421747', '50434460', '50435806', '50494996', '78652243', '30700042', '30801455', '30801322', '30904224', '40438728', '40418179', '30468950', '30470353', '30470391', '30470460', '30462889', '30464070', '30471361', '30482375', '30482376', '30482152', '30460923', '30460040', '30384695', '30385751', '30412577', '30403789', '30417113', '30361695', '30334834', '30319896', '30304710', '30351467', '30380877', '30384350', '30357669', '30361632', '30367380', '30417679', '30415607', '30460567', '30422938', '30437140', '30440236', '30492242', '30467425', '40419249', '40432114', '40450369', '40414325', '40414724', '60476426', '50446763', '50440508', '60417901', '50419816', '50422146', '50410968', '50410050', '50410853', '50140631']

# for patron in kohadata:
#     if patron['category_id']=='CO' or patron['category_id']=='CT' or patron['category_id']=='CGA' or patron['category_id']=='CGB':
#             if patron['userid'] not in talabats:
#                 print(patron['surname'],patron['gender'],patron['category_id'],patron['email'],patron['patron_id'])
